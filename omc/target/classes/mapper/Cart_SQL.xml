<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
"-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cart">

	<!-- 상품ID CID를 갖는 CART 정보  -->
	<select id="selectCartCID" parameterType="hashmap" resultType="hashmap">
	<![CDATA[
		SELECT
			* 
		FROM
			CART 
		WHERE
			CT_CID=#{CT_CID}
	]]>
	</select>
	
	<!-- 상품ID GID를 갖는 CART 정보  -->
	<select id="selectCartGID" parameterType="hashmap" resultType="hashmap">
	<![CDATA[
		SELECT
			* 
		FROM
			CART 
		WHERE
			CT_GID=#{CT_GID}  
			AND
			CT_ID=#{CT_ID}
	]]>
	</select>

	<!-- CT_ID 사용자가 가진 장바구니번호 -->
	<select id="selectCartNum" parameterType="hashmap" resultType="hashmap">
	<![CDATA[
		SELECT
			MAX(CT_NUM) MAX
		FROM
			CART 
		WHERE
			CT_ID=#{CT_ID}
	]]>
	</select>
	
	<!-- 장바구니의 테이블의 CT_NUM 최대값 -->
	<select id="selectCartNumMAX" resultType="hashmap">
	<![CDATA[
		SELECT
			MAX(CT_NUM) MAX
		FROM
			CART
	]]>
	</select>
	
	<!-- Cart 장바구니 리스트보기 -->
	<select id="cartList" parameterType="hashmap" resultType="hashmap">
	<![CDATA[
		SELECT
			* 
		FROM
			CART 
		WHERE
			CT_ID=#{MEM_ID}
	]]>
	</select>	
	
	<!-- insertCart 장바구니 추가 -->
	<insert id="insertCart" parameterType="hashmap">
	<![CDATA[
		INSERT INTO
			CART
		VALUES(
			CT_CID_SEQ.NEXTVAL,
			#{CT_NUM}, 
			#{CT_NAME},
			#{CT_GID},
			#{CT_PRICE},
			#{CT_DCPRICE},
			#{CT_ID},
			#{CT_COUNT}
		)	
	]]>
	</insert>
	
	<!-- updateCart 장바구니 구매수량 변경 -->
	<update id="updateCart" parameterType="hashmap">
	<![CDATA[
		UPDATE
			CART
		SET
			CT_COUNT = #{CT_COUNT} 
		WHERE
			CT_CID = #{CT_CID}
	]]>
	</update>

	<!-- deleteCart 장바구니 삭제 -->
	<delete id="deleteCart" parameterType="hashmap">
	<![CDATA[
		DELETE
			FROM CART
		WHERE
			CT_CID = #{CT_CID}
	]]>
	</delete>
	
	<!-- 장바구니에서 상품ID가 GID인 모든 장바구니 삭제 -->
	<delete id="deleteCartGID" parameterType="hashmap">
		DELETE
			FROM CART
		WHERE
			CT_GID = #{CT_GID}
	</delete>

</mapper>